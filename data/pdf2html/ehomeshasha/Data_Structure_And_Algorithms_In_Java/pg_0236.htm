<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0052)http://www.verypdf.com/ -->
<html>
<head>
<title>pg_0236</title>

<style>
<!-- 
select {font-size:12px;}
A:link {text-decoration: none; color: blue}
A:visited {text-decoration: none; color: purple}
A:active {text-decoration: red}
A:hover {text-decoration: underline; color:red}
-->
</style>
<script TYPE="text/javascript"> 
<!-- hide 
function killerrors()
{ 
return true; 
} 
window.onerror = killerrors; 
// --> 
</script>
<style type="text/css">
<!--
.ft0{font-style:normal;font-weight:normal;font-size:16px;font-family:Times New Roman;color:#000000;}
.ft1{font-style:normal;font-weight:normal;font-size:13px;font-family:Arial;color:#010100;}
.ft2{font-style:normal;font-weight:normal;font-size:13px;font-family:Times New Roman;color:#010100;}
.ft3{font-style:normal;font-weight:bold;font-size:13px;font-family:Arial;color:#800000;}
-->
</style>
</head>
<body vlink="#FFFFFF" link="#FFFFFF" bgcolor="#ffffff">

<script TYPE="text/javascript">
var currentpos,timer; 
function initialize() 
{ 
timer=setInterval("scrollwindow()",10);
} 
function sc(){
clearInterval(timer); 
}
function scrollwindow() 
{ 
currentpos=document.body.scrollTop; 
window.scroll(0,++currentpos); 
if (currentpos != document.body.scrollTop) 
sc();
} 
document.onmousedown=sc
document.ondblclick=initialize
</script>
<div style="position:absolute;top:0;left:0"><img width="826" height="1169" src="pg_0236.jpg" ALT=""></div>
<div style="position:absolute;top:1102;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:1102;left:391"><span class="ft0"> - 236 -</span></div>
<div style="position:absolute;top:84;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:147;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:100;left:90"><span class="ft1"> The </span></div>
<div style="position:absolute;top:100;left:118"><span class="ft2">triangle()</span></div>
<div style="position:absolute;top:100;left:201"><span class="ft1"> method we just saw performs two kinds of operations. First, it carries </span></div>
<div style="position:absolute;top:117;left:90"><span class="ft1">out the arithmetic necessary to compute triangular numbers. This involves checking if </span></div>
<div style="position:absolute;top:117;left:617"><span class="ft2">n</span></div>
<div style="position:absolute;top:117;left:626"><span class="ft1"> is </span></div>
<div style="position:absolute;top:135;left:90"><span class="ft1">1, and adding </span></div>
<div style="position:absolute;top:135;left:178"><span class="ft2">n</span></div>
<div style="position:absolute;top:135;left:187"><span class="ft1"> to the results of previous recursive calls. However, </span></div>
<div style="position:absolute;top:135;left:504"><span class="ft2">triangle()</span></div>
<div style="position:absolute;top:135;left:587"><span class="ft1"> also </span></div>
<div style="position:absolute;top:151;left:90"><span class="ft1">performs the operations necessary to manage the method itself. These involve transfer of </span></div>
<div style="position:absolute;top:167;left:90"><span class="ft1">control, argument access, and the return address. These operations are not visible by </span></div>
<div style="position:absolute;top:183;left:90"><span class="ft1">looking at the code; they're built into all methods. Here, roughly speaking, is what </span></div>
<div style="position:absolute;top:199;left:90"><span class="ft1">happens during a call to a method:</span></div>
<div style="position:absolute;top:196;left:303"><span class="ft0"> </span></div>
<div style="position:absolute;top:147;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:199;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:218;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:240;left:79"><span class="ft0">  </span></div>
<div style="position:absolute;top:234;left:90"><span class="ft1"> .</span></div>
<div style="position:absolute;top:231;left:95"><span class="ft0">   </span></div>
<div style="position:absolute;top:234;left:107"><span class="ft1">When a method is called, its arguments and the return address are pushed onto a </span></div>
<div style="position:absolute;top:250;left:107"><span class="ft1">stack.</span></div>
<div style="position:absolute;top:247;left:144"><span class="ft0"> </span></div>
<div style="position:absolute;top:240;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:250;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:270;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:285;left:79"><span class="ft0">  </span></div>
<div style="position:absolute;top:285;left:90"><span class="ft1"> .</span></div>
<div style="position:absolute;top:282;left:95"><span class="ft0">   </span></div>
<div style="position:absolute;top:285;left:107"><span class="ft1">A method can access its arguments by peeking at the top of the stack.</span></div>
<div style="position:absolute;top:282;left:539"><span class="ft0"> </span></div>
<div style="position:absolute;top:285;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:289;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:308;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:330;left:79"><span class="ft0">  </span></div>
<div style="position:absolute;top:324;left:90"><span class="ft1"> .</span></div>
<div style="position:absolute;top:321;left:95"><span class="ft0">   </span></div>
<div style="position:absolute;top:324;left:107"><span class="ft1">When a method is about to return, it peeks at the stack to obtain the return address, </span></div>
<div style="position:absolute;top:340;left:107"><span class="ft1">and then pops both this address and its arguments off the stack and discards them.</span></div>
<div style="position:absolute;top:337;left:619"><span class="ft0">   </span></div>
<div style="position:absolute;top:340;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:359;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:416;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:375;left:90"><span class="ft1"> The </span></div>
<div style="position:absolute;top:375;left:118"><span class="ft2">stackTriangle.java</span></div>
<div style="position:absolute;top:375;left:268"><span class="ft1"> program contains three classes: </span></div>
<div style="position:absolute;top:375;left:473"><span class="ft2">Params</span></div>
<div style="position:absolute;top:375;left:523"><span class="ft1">, </span></div>
<div style="position:absolute;top:375;left:530"><span class="ft2">StackX</span></div>
<div style="position:absolute;top:375;left:580"><span class="ft1">, and </span></div>
<div style="position:absolute;top:393;left:90"><span class="ft2">StackTriangleApp</span></div>
<div style="position:absolute;top:393;left:224"><span class="ft1">. The </span></div>
<div style="position:absolute;top:393;left:259"><span class="ft2">Params</span></div>
<div style="position:absolute;top:393;left:309"><span class="ft1"> class encapsulates the return address and the </span></div>
<div style="position:absolute;top:410;left:90"><span class="ft1">method's argument, </span></div>
<div style="position:absolute;top:410;left:216"><span class="ft2">n</span></div>
<div style="position:absolute;top:410;left:225"><span class="ft1">; objects of this class are pushed onto the stack. The </span></div>
<div style="position:absolute;top:410;left:552"><span class="ft2">StackX</span></div>
<div style="position:absolute;top:410;left:602"><span class="ft1"> class </span></div>
<div style="position:absolute;top:427;left:90"><span class="ft1">is similar to those in other chapters, except that it holds objects of class </span></div>
<div style="position:absolute;top:427;left:531"><span class="ft2">Params</span></div>
<div style="position:absolute;top:427;left:581"><span class="ft1">. The </span></div>
<div style="position:absolute;top:444;left:90"><span class="ft2">StackTriangleApp</span></div>
<div style="position:absolute;top:444;left:224"><span class="ft1"> class contains four methods: </span></div>
<div style="position:absolute;top:444;left:407"><span class="ft2">main()</span></div>
<div style="position:absolute;top:444;left:457"><span class="ft1">, </span></div>
<div style="position:absolute;top:444;left:465"><span class="ft2">recTriangle()</span></div>
<div style="position:absolute;top:444;left:573"><span class="ft1">, </span></div>
<div style="position:absolute;top:444;left:581"><span class="ft2">step()</span></div>
<div style="position:absolute;top:444;left:631"><span class="ft1">, </span></div>
<div style="position:absolute;top:461;left:90"><span class="ft1">and the usual </span></div>
<div style="position:absolute;top:461;left:177"><span class="ft2">getInt()</span></div>
<div style="position:absolute;top:461;left:244"><span class="ft1"> method for numerical input.</span></div>
<div style="position:absolute;top:458;left:416"><span class="ft0"> </span></div>
<div style="position:absolute;top:416;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:462;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:481;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:504;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:498;left:90"><span class="ft1"> The </span></div>
<div style="position:absolute;top:498;left:118"><span class="ft2">main()</span></div>
<div style="position:absolute;top:498;left:168"><span class="ft1"> routine asks the user for a number, calls the </span></div>
<div style="position:absolute;top:498;left:446"><span class="ft2">recTriangle()</span></div>
<div style="position:absolute;top:498;left:554"><span class="ft1"> method to </span></div>
<div style="position:absolute;top:515;left:90"><span class="ft1">calculate the triangular number corresponding to </span></div>
<div style="position:absolute;top:515;left:392"><span class="ft2">n</span></div>
<div style="position:absolute;top:515;left:400"><span class="ft1">, and displays the result.</span></div>
<div style="position:absolute;top:512;left:550"><span class="ft0"> </span></div>
<div style="position:absolute;top:504;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:516;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:535;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:592;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:551;left:90"><span class="ft1"> The </span></div>
<div style="position:absolute;top:551;left:118"><span class="ft2">recTriangle()</span></div>
<div style="position:absolute;top:551;left:226"><span class="ft1"> method creates a </span></div>
<div style="position:absolute;top:551;left:342"><span class="ft2">StackX</span></div>
<div style="position:absolute;top:551;left:391"><span class="ft1"> object and initializes </span></div>
<div style="position:absolute;top:551;left:524"><span class="ft2">codePart</span></div>
<div style="position:absolute;top:551;left:590"><span class="ft1"> to 1. It </span></div>
<div style="position:absolute;top:569;left:90"><span class="ft1">then settles into a </span></div>
<div style="position:absolute;top:569;left:203"><span class="ft2">while</span></div>
<div style="position:absolute;top:569;left:245"><span class="ft1"> loop where it repeatedly calls </span></div>
<div style="position:absolute;top:569;left:431"><span class="ft2">step()</span></div>
<div style="position:absolute;top:569;left:481"><span class="ft1">. It won't exit from the </span></div>
<div style="position:absolute;top:586;left:90"><span class="ft1">loop until </span></div>
<div style="position:absolute;top:586;left:150"><span class="ft2">step()</span></div>
<div style="position:absolute;top:586;left:200"><span class="ft1"> returns </span></div>
<div style="position:absolute;top:586;left:251"><span class="ft2">true</span></div>
<div style="position:absolute;top:586;left:284"><span class="ft1"> by reaching case 6, its exit point. The </span></div>
<div style="position:absolute;top:586;left:521"><span class="ft2">step()</span></div>
<div style="position:absolute;top:586;left:571"><span class="ft1"> method is </span></div>
<div style="position:absolute;top:603;left:90"><span class="ft1">basically a large </span></div>
<div style="position:absolute;top:603;left:194"><span class="ft2">switch</span></div>
<div style="position:absolute;top:603;left:244"><span class="ft1"> statement in which each </span></div>
<div style="position:absolute;top:603;left:400"><span class="ft2">case</span></div>
<div style="position:absolute;top:603;left:434"><span class="ft1"> corresponds to a section of code </span></div>
<div style="position:absolute;top:620;left:90"><span class="ft1">in the original </span></div>
<div style="position:absolute;top:620;left:177"><span class="ft2">triangle()</span></div>
<div style="position:absolute;top:620;left:260"><span class="ft1"> method. Listing 6.7 shows the </span></div>
<div style="position:absolute;top:620;left:451"><span class="ft2">stackTriangle.java</span></div>
<div style="position:absolute;top:620;left:601"><span class="ft1"> </span></div>
<div style="position:absolute;top:637;left:90"><span class="ft1">program.</span></div>
<div style="position:absolute;top:634;left:146"><span class="ft0"> </span></div>
<div style="position:absolute;top:592;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:637;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:656;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:671;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:672;left:90"><span class="ft3"> Listing 6.7 The stackTriangle.java Program</span></div>
<div style="position:absolute;top:669;left:373"><span class="ft0"> </span></div>
<div style="position:absolute;top:671;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:675;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:694;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:710;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:709;left:113"><span class="ft2"> // stackTriangle.java</span></div>
<div style="position:absolute;top:706;left:288"><span class="ft0"> </span></div>
<div style="position:absolute;top:710;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:714;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:729;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:728;left:113"><span class="ft2"> // evaluates triangular numbers, stack replaces recursion</span></div>
<div style="position:absolute;top:725;left:588"><span class="ft0"> </span></div>
<div style="position:absolute;top:729;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:733;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:748;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:748;left:113"><span class="ft2"> // to run this program: C&gt;java StackTriangleApp</span></div>
<div style="position:absolute;top:745;left:505"><span class="ft0"> </span></div>
<div style="position:absolute;top:748;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:752;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:767;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:767;left:113"><span class="ft2"> import java.io.*;                 // for I/O</span></div>
<div style="position:absolute;top:764;left:480"><span class="ft0"> </span></div>
<div style="position:absolute;top:767;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:771;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:786;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:786;left:110"><span class="ft2"> ////////////////////////////////////////////////////////////////</span></div>
<div style="position:absolute;top:783;left:643"><span class="ft0"> </span></div>
<div style="position:absolute;top:786;left:643"><span class="ft0"> </span></div>
<div style="position:absolute;top:790;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:806;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:805;left:113"><span class="ft2"> class Params     // parameters to save on stack</span></div>
<div style="position:absolute;top:802;left:505"><span class="ft0"> </span></div>
<div style="position:absolute;top:806;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:809;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:825;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:824;left:113"><span class="ft2">    {</span></div>
<div style="position:absolute;top:821;left:147"><span class="ft0"> </span></div>
<div style="position:absolute;top:825;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:829;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:844;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:843;left:113"><span class="ft2">    public int n;</span></div>
<div style="position:absolute;top:840;left:247"><span class="ft0"> </span></div>
<div style="position:absolute;top:844;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:848;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:863;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:863;left:113"><span class="ft2">    public int codePart;</span></div>
<div style="position:absolute;top:860;left:305"><span class="ft0"> </span></div>
<div style="position:absolute;top:863;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:867;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:882;left:79"><span class="ft0">  </span></div>
<div style="position:absolute;top:882;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:886;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:901;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:901;left:113"><span class="ft2">    public Params(int nn, int ra)</span></div>
<div style="position:absolute;top:898;left:380"><span class="ft0"> </span></div>
<div style="position:absolute;top:901;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:905;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:921;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:920;left:113"><span class="ft2">       {</span></div>
<div style="position:absolute;top:917;left:172"><span class="ft0"> </span></div>
<div style="position:absolute;top:921;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:924;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:940;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:939;left:113"><span class="ft2">       n=nn;</span></div>
<div style="position:absolute;top:936;left:205"><span class="ft0"> </span></div>
<div style="position:absolute;top:940;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:944;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:959;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:958;left:113"><span class="ft2">       returnAddress = ra;</span></div>
<div style="position:absolute;top:955;left:322"><span class="ft0"> </span></div>
<div style="position:absolute;top:959;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:963;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:978;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:978;left:113"><span class="ft2">       }</span></div>
<div style="position:absolute;top:975;left:172"><span class="ft0"> </span></div>
<div style="position:absolute;top:978;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:982;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:997;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:997;left:113"><span class="ft2">    }  // end class Params</span></div>
<div style="position:absolute;top:994;left:322"><span class="ft0"> </span></div>
<div style="position:absolute;top:997;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:1001;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:1020;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:1036;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:1035;left:110"><span class="ft2"> ////////////////////////////////////////////////////////////////</span></div>
<div style="position:absolute;top:1032;left:643"><span class="ft0"> </span></div>
<div style="position:absolute;top:1036;left:643"><span class="ft0"> </span></div>
<div style="position:absolute;top:1039;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:1058;left:80"><span class="ft0"> </span></div>
<script TYPE="text/javascript">
			var currentZoom = parent.ltop.currentZoom;
			if(currentZoom != undefined)
				document.body.style.zoom=currentZoom/100;
			</script>
</body>
</html>