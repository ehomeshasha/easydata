<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0052)http://www.verypdf.com/ -->
<html>
<head>
<title>pg_0325</title>

<style>
<!-- 
select {font-size:12px;}
A:link {text-decoration: none; color: blue}
A:visited {text-decoration: none; color: purple}
A:active {text-decoration: red}
A:hover {text-decoration: underline; color:red}
-->
</style>
<script TYPE="text/javascript"> 
<!-- hide 
function killerrors()
{ 
return true; 
} 
window.onerror = killerrors; 
// --> 
</script>
<style type="text/css">
<!--
.ft0{font-style:normal;font-weight:normal;font-size:16px;font-family:Times New Roman;color:#000000;}
.ft1{font-style:normal;font-weight:normal;font-size:13px;font-family:Arial;color:#010100;}
.ft2{font-style:normal;font-weight:bold;font-size:13px;font-family:Arial;color:#010100;}
.ft3{font-style:normal;font-weight:normal;font-size:13px;font-family:Times New Roman;color:#000000;}
.ft4{font-style:normal;font-weight:bold;font-size:16px;font-family:Arial;color:#010100;}
-->
</style>
</head>
<body vlink="#FFFFFF" link="#FFFFFF" bgcolor="#ffffff">

<script TYPE="text/javascript">
var currentpos,timer; 
function initialize() 
{ 
timer=setInterval("scrollwindow()",10);
} 
function sc(){
clearInterval(timer); 
}
function scrollwindow() 
{ 
currentpos=document.body.scrollTop; 
window.scroll(0,++currentpos); 
if (currentpos != document.body.scrollTop) 
sc();
} 
document.onmousedown=sc
document.ondblclick=initialize
</script>
<div style="position:absolute;top:0;left:0"><img width="826" height="1169" src="pg_0325.jpg" ALT=""></div>
<div style="position:absolute;top:1102;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:1102;left:391"><span class="ft0"> - 325 -</span></div>
<div style="position:absolute;top:81;left:90"><span class="ft1">in an ordinary binary search tree: It follows a path from the root to the place where the </span></div>
<div style="position:absolute;top:97;left:90"><span class="ft1">node should be inserted, going left or right at each node depending on the relative size of </span></div>
<div style="position:absolute;top:112;left:90"><span class="ft1">the node's key and the search key.</span></div>
<div style="position:absolute;top:109;left:304"><span class="ft0"> </span></div>
<div style="position:absolute;top:113;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:132;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:161;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:148;left:90"><span class="ft1"> However, in a red-black tree, getting to the insertion point is complicated by color flips </span></div>
<div style="position:absolute;top:164;left:90"><span class="ft1">and rotations. We introduced color flips in Experiment 3; now we'll look at them in more </span></div>
<div style="position:absolute;top:180;left:90"><span class="ft1">detail.</span></div>
<div style="position:absolute;top:177;left:127"><span class="ft0"> </span></div>
<div style="position:absolute;top:161;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:180;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:199;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:245;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:215;left:90"><span class="ft1"> Imagine the insertion routine proceeding down the tree, going left or right at each node, </span></div>
<div style="position:absolute;top:231;left:90"><span class="ft1">searching for the place to insert a new node. To make sure the color rules aren't broken, </span></div>
<div style="position:absolute;top:247;left:90"><span class="ft1">it needs to perform color flips when necessary. Here's the rule: Every time the insertion </span></div>
<div style="position:absolute;top:263;left:90"><span class="ft1">routine encounters a black node that has two red children, it must change the children to </span></div>
<div style="position:absolute;top:279;left:90"><span class="ft1">black and the parent to red (unless the parent is the root, which always remains black).</span></div>
<div style="position:absolute;top:276;left:623"><span class="ft0"> </span></div>
<div style="position:absolute;top:245;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:279;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:298;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:371;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:432;left:324"><span class="ft0">  </span></div>
<div style="position:absolute;top:371;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:432;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:451;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:467;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:467;left:136"><span class="ft2"> Figure 9.11:  Color flip</span></div>
<div style="position:absolute;top:464;left:277"><span class="ft0"> </span></div>
<div style="position:absolute;top:467;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:490;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:488;left:136"><span class="ft3">  </span></div>
<div style="position:absolute;top:488;left:640"><span class="ft3">  </span></div>
<div style="position:absolute;top:490;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:509;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:539;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:525;left:90"><span class="ft1"> How does a color flip affect the red-black rules. For convenience, let's call the node at </span></div>
<div style="position:absolute;top:541;left:90"><span class="ft1">the top of the triangle, the one that's red before the flip, P for parent. We'll call P's left and </span></div>
<div style="position:absolute;top:557;left:90"><span class="ft1">right children X1 and X2. This is shown in Figure 9.11a.</span></div>
<div style="position:absolute;top:554;left:431"><span class="ft0"> </span></div>
<div style="position:absolute;top:539;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:557;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:576;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:591;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:592;left:90"><span class="ft4"> Black Heights Unchanged</span></div>
<div style="position:absolute;top:592;left:296"><span class="ft0"> </span></div>
<div style="position:absolute;top:591;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:595;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:614;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:660;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:630;left:90"><span class="ft1"> Figure 9.11b shows the nodes after the color flip. The flip leaves unchanged the number </span></div>
<div style="position:absolute;top:646;left:90"><span class="ft1">of black nodes on the path from the root on down through P to the leaf or null nodes. All </span></div>
<div style="position:absolute;top:662;left:90"><span class="ft1">such paths go through P, and then through either X1 or X2. Before the flip, only P is </span></div>
<div style="position:absolute;top:678;left:90"><span class="ft1">black, so the triangle (consisting of P, X1, and X2) adds one black node to each of these </span></div>
<div style="position:absolute;top:694;left:90"><span class="ft1">paths.</span></div>
<div style="position:absolute;top:691;left:128"><span class="ft0"> </span></div>
<div style="position:absolute;top:660;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:694;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:713;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:743;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:729;left:90"><span class="ft1"> After the flip, P is no longer black, but both L and R are, so again the triangle contributes </span></div>
<div style="position:absolute;top:745;left:90"><span class="ft1">one black node to every path that passes through it. So a color flip can't cause Rule 4 to </span></div>
<div style="position:absolute;top:761;left:90"><span class="ft1">be violated.</span></div>
<div style="position:absolute;top:758;left:161"><span class="ft0"> </span></div>
<div style="position:absolute;top:743;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:761;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:780;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:802;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:796;left:90"><span class="ft1"> Color flips are helpful because they make red leaf nodes into black leaf nodes. This </span></div>
<div style="position:absolute;top:812;left:90"><span class="ft1">makes it easier to attach new red nodes without violating Rule 3.</span></div>
<div style="position:absolute;top:809;left:486"><span class="ft0"> </span></div>
<div style="position:absolute;top:802;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:812;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:831;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:847;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:847;left:90"><span class="ft4"> Could Be Two Reds</span></div>
<div style="position:absolute;top:847;left:247"><span class="ft0"> </span></div>
<div style="position:absolute;top:847;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:851;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:870;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:908;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:886;left:90"><span class="ft1"> Although Rule 4 is not violated by a color flip, Rule 3 (a node and its parent can't both be </span></div>
<div style="position:absolute;top:902;left:90"><span class="ft1">red) may be. If the parent of P is black, there's no problem when P is changed from black </span></div>
<div style="position:absolute;top:918;left:90"><span class="ft1">to red. However, if the parent of P is red, then, after the color change, we'll have two reds </span></div>
<div style="position:absolute;top:934;left:90"><span class="ft1">in a row.</span></div>
<div style="position:absolute;top:931;left:143"><span class="ft0"> </span></div>
<div style="position:absolute;top:908;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:934;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:953;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:975;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:969;left:90"><span class="ft1"> This needs to be fixed before we continue down the path to insert the new node. We can </span></div>
<div style="position:absolute;top:985;left:90"><span class="ft1">correct the situation with a rotation, as we'll soon see.</span></div>
<div style="position:absolute;top:982;left:419"><span class="ft0"> </span></div>
<div style="position:absolute;top:975;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:985;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:1004;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:1019;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:1020;left:90"><span class="ft4"> The Root Situation</span></div>
<div style="position:absolute;top:1020;left:238"><span class="ft0"> </span></div>
<div style="position:absolute;top:1019;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:1023;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:1042;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:1064;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:1058;left:90"><span class="ft1"> What about the root. Remember that a color flip of the root and its two children leaves </span></div>
<div style="position:absolute;top:1074;left:90"><span class="ft1">the root, as well as its children, black. This avoids violating Rule 2. Does this affect the </span></div>
<div style="position:absolute;top:1064;left:640"><span class="ft0">  </span></div>
<script TYPE="text/javascript">
			var currentZoom = parent.ltop.currentZoom;
			if(currentZoom != undefined)
				document.body.style.zoom=currentZoom/100;
			</script>
</body>
</html>