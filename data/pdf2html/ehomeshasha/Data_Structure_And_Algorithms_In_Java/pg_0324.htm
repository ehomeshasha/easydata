<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0052)http://www.verypdf.com/ -->
<html>
<head>
<title>pg_0324</title>

<style>
<!-- 
select {font-size:12px;}
A:link {text-decoration: none; color: blue}
A:visited {text-decoration: none; color: purple}
A:active {text-decoration: red}
A:hover {text-decoration: underline; color:red}
-->
</style>
<script TYPE="text/javascript"> 
<!-- hide 
function killerrors()
{ 
return true; 
} 
window.onerror = killerrors; 
// --> 
</script>
<style type="text/css">
<!--
.ft0{font-style:normal;font-weight:normal;font-size:16px;font-family:Times New Roman;color:#000000;}
.ft1{font-style:normal;font-weight:normal;font-size:13px;font-family:Arial;color:#010100;}
.ft2{font-style:normal;font-weight:bold;font-size:16px;font-family:Verdana;color:#000000;}
.ft3{font-style:normal;font-weight:bold;font-size:18px;font-family:Arial;color:#000080;}
.ft4{font-style:normal;font-weight:bold;font-size:18px;font-family:Arial;color:#800000;}
-->
</style>
</head>
<body vlink="#FFFFFF" link="#FFFFFF" bgcolor="#ffffff">

<script TYPE="text/javascript">
var currentpos,timer; 
function initialize() 
{ 
timer=setInterval("scrollwindow()",10);
} 
function sc(){
clearInterval(timer); 
}
function scrollwindow() 
{ 
currentpos=document.body.scrollTop; 
window.scroll(0,++currentpos); 
if (currentpos != document.body.scrollTop) 
sc();
} 
document.onmousedown=sc
document.ondblclick=initialize
</script>
<div style="position:absolute;top:0;left:0"><img width="826" height="1169" src="pg_0324.jpg" ALT=""></div>
<div style="position:absolute;top:1102;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:1102;left:391"><span class="ft0"> - 324 -</span></div>
<div style="position:absolute;top:84;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:114;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:100;left:90"><span class="ft1"> Unfortunately, computers aren't very good at &quot;just looking&quot; at a pattern. They work better if </span></div>
<div style="position:absolute;top:116;left:90"><span class="ft1">they can follow a few simple rules. That's what the red-black scheme provides, in the form </span></div>
<div style="position:absolute;top:132;left:90"><span class="ft1">of color coding and the four color rules.</span></div>
<div style="position:absolute;top:129;left:331"><span class="ft0"> </span></div>
<div style="position:absolute;top:132;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:149;left:79"><span class="ft2"> </span></div>
<div style="position:absolute;top:169;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:168;left:90"><span class="ft3"> Inserting a New Node</span></div>
<div style="position:absolute;top:170;left:281"><span class="ft0"> </span></div>
<div style="position:absolute;top:169;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:174;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:193;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:214;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:209;left:90"><span class="ft1"> Now you have enough background to see how a red-black tree's insertion routine uses </span></div>
<div style="position:absolute;top:225;left:90"><span class="ft1">rotations and the color rules to maintain the tree's balance.</span></div>
<div style="position:absolute;top:222;left:450"><span class="ft0"> </span></div>
<div style="position:absolute;top:214;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:225;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:244;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:260;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:259;left:90"><span class="ft4"> Preview</span></div>
<div style="position:absolute;top:261;left:161"><span class="ft0"> </span></div>
<div style="position:absolute;top:260;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:265;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:285;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:314;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:300;left:90"><span class="ft1"> We're going to briefly preview our approach to describing the insertion process. Don't </span></div>
<div style="position:absolute;top:316;left:90"><span class="ft1">worry if things aren't completely clear in the preview; we'll discuss things in more detail in </span></div>
<div style="position:absolute;top:332;left:90"><span class="ft1">a moment.</span></div>
<div style="position:absolute;top:329;left:156"><span class="ft0"> </span></div>
<div style="position:absolute;top:314;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:333;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:352;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:389;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:368;left:90"><span class="ft1"> In the discussion that follows we'll use X, P, and G to designate a pattern of related </span></div>
<div style="position:absolute;top:383;left:90"><span class="ft1">nodes. X is a node that has caused a rule violation. (Sometimes X refers to a newly </span></div>
<div style="position:absolute;top:399;left:90"><span class="ft1">inserted node, and sometimes to the child node when a parent and child have a red-red </span></div>
<div style="position:absolute;top:415;left:90"><span class="ft1">conflict.)</span></div>
<div style="position:absolute;top:412;left:142"><span class="ft0"> </span></div>
<div style="position:absolute;top:389;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:416;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:435;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:450;left:79"><span class="ft0">  </span></div>
<div style="position:absolute;top:451;left:90"><span class="ft1"> .</span></div>
<div style="position:absolute;top:448;left:95"><span class="ft0">   </span></div>
<div style="position:absolute;top:451;left:107"><span class="ft1">X is a particular node.</span></div>
<div style="position:absolute;top:448;left:242"><span class="ft0"> </span></div>
<div style="position:absolute;top:450;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:454;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:473;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:488;left:79"><span class="ft0">  </span></div>
<div style="position:absolute;top:489;left:90"><span class="ft1"> .</span></div>
<div style="position:absolute;top:486;left:95"><span class="ft0">   </span></div>
<div style="position:absolute;top:489;left:107"><span class="ft1">P is the parent of X.</span></div>
<div style="position:absolute;top:486;left:229"><span class="ft0"> </span></div>
<div style="position:absolute;top:488;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:492;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:511;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:527;left:79"><span class="ft0">  </span></div>
<div style="position:absolute;top:527;left:90"><span class="ft1"> .</span></div>
<div style="position:absolute;top:524;left:95"><span class="ft0">   </span></div>
<div style="position:absolute;top:527;left:107"><span class="ft1">G is the grandparent of X (the parent of P).</span></div>
<div style="position:absolute;top:524;left:371"><span class="ft0"> </span></div>
<div style="position:absolute;top:527;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:531;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:550;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:603;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:566;left:90"><span class="ft1"> On the way down the tree to find the insertion point, you perform a color flip whenever </span></div>
<div style="position:absolute;top:582;left:90"><span class="ft1">you find a black node with two red children (a violation of Rule 2). Sometimes the flip </span></div>
<div style="position:absolute;top:597;left:90"><span class="ft1">causes a red-red conflict (a violation of Rule 3). Call the red child X and the red parent P. </span></div>
<div style="position:absolute;top:613;left:90"><span class="ft1">The conflict can be fixed with a single rotation or a double rotation, depending on whether </span></div>
<div style="position:absolute;top:629;left:90"><span class="ft1">X is an outside or inside grandchild of G. Following color flips and rotations, you continue </span></div>
<div style="position:absolute;top:645;left:90"><span class="ft1">down to the insertion point and insert the new node.</span></div>
<div style="position:absolute;top:642;left:409"><span class="ft0"> </span></div>
<div style="position:absolute;top:603;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:646;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:665;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:710;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:681;left:90"><span class="ft1"> After you've inserted the new node X, if P is black you simply attach the new red node. If </span></div>
<div style="position:absolute;top:697;left:90"><span class="ft1">P is red, there are two possibilities: X can be an outside or inside grandchild of G. You </span></div>
<div style="position:absolute;top:712;left:90"><span class="ft1">perform two color changes (we'll see what they are in a moment). If X is an outside </span></div>
<div style="position:absolute;top:728;left:90"><span class="ft1">grandchild, you perform one rotation, and if it's an inside grandchild you perform two. </span></div>
<div style="position:absolute;top:744;left:90"><span class="ft1">This restores the tree to a balanced state.</span></div>
<div style="position:absolute;top:741;left:347"><span class="ft0"> </span></div>
<div style="position:absolute;top:710;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:745;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:764;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:785;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:780;left:90"><span class="ft1"> Now we'll recapitulate this preview in more detail. We'll divide the discussion into three </span></div>
<div style="position:absolute;top:796;left:90"><span class="ft1">parts, arranged in order of complexity:</span></div>
<div style="position:absolute;top:793;left:324"><span class="ft0"> </span></div>
<div style="position:absolute;top:785;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:796;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:815;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:830;left:79"><span class="ft0">  </span></div>
<div style="position:absolute;top:831;left:90"><span class="ft1"> 1.</span></div>
<div style="position:absolute;top:828;left:102"><span class="ft0">  </span></div>
<div style="position:absolute;top:831;left:113"><span class="ft1">Color flips on the way down</span></div>
<div style="position:absolute;top:828;left:283"><span class="ft0"> </span></div>
<div style="position:absolute;top:830;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:834;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:853;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:868;left:79"><span class="ft0">  </span></div>
<div style="position:absolute;top:869;left:90"><span class="ft1"> 2.</span></div>
<div style="position:absolute;top:866;left:102"><span class="ft0">  </span></div>
<div style="position:absolute;top:869;left:113"><span class="ft1">Rotations once the node is inserted</span></div>
<div style="position:absolute;top:866;left:331"><span class="ft0"> </span></div>
<div style="position:absolute;top:868;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:872;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:891;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:907;left:79"><span class="ft0">  </span></div>
<div style="position:absolute;top:907;left:90"><span class="ft1"> 3.</span></div>
<div style="position:absolute;top:904;left:102"><span class="ft0">  </span></div>
<div style="position:absolute;top:907;left:113"><span class="ft1">Rotations on the way down</span></div>
<div style="position:absolute;top:904;left:280"><span class="ft0"> </span></div>
<div style="position:absolute;top:907;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:911;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:930;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:967;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:946;left:90"><span class="ft1"> If we were discussing these three parts in strict chronological order, we'd examine part 3 </span></div>
<div style="position:absolute;top:962;left:90"><span class="ft1">before part 2. However, it's easier to talk about rotations at the bottom of the tree than in </span></div>
<div style="position:absolute;top:978;left:90"><span class="ft1">the middle, and operations 1 and 2 are encountered more frequently than operation 3, so </span></div>
<div style="position:absolute;top:994;left:90"><span class="ft1">we'll discuss 2 before 3.</span></div>
<div style="position:absolute;top:991;left:237"><span class="ft0"> </span></div>
<div style="position:absolute;top:967;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:994;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:1013;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:1029;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:1028;left:90"><span class="ft4"> Color Flips on the Way Down</span></div>
<div style="position:absolute;top:1030;left:350"><span class="ft0"> </span></div>
<div style="position:absolute;top:1029;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:1034;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:1054;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:1069;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:1069;left:90"><span class="ft1"> The insertion routine in a red-black tree starts off doing essentially the same thing it does </span></div>
<div style="position:absolute;top:1069;left:640"><span class="ft0">  </span></div>
<script TYPE="text/javascript">
			var currentZoom = parent.ltop.currentZoom;
			if(currentZoom != undefined)
				document.body.style.zoom=currentZoom/100;
			</script>
</body>
</html>