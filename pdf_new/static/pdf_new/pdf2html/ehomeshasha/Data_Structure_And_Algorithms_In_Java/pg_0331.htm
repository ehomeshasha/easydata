<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0052)http://www.verypdf.com/ -->
<html>
<head>
<title>pg_0331</title>

<style>
<!-- 
select {font-size:12px;}
A:link {text-decoration: none; color: blue}
A:visited {text-decoration: none; color: purple}
A:active {text-decoration: red}
A:hover {text-decoration: underline; color:red}
-->
</style>
<script TYPE="text/javascript"> 
<!-- hide 
function killerrors()
{ 
return true; 
} 
window.onerror = killerrors; 
// --> 
</script>
<style type="text/css">
<!--
.ft0{font-style:normal;font-weight:normal;font-size:16px;font-family:Times New Roman;color:#000000;}
.ft1{font-style:normal;font-weight:normal;font-size:13px;font-family:Arial;color:#010100;}
.ft2{font-style:normal;font-weight:bold;font-size:13px;font-family:Arial;color:#010100;}
.ft3{font-style:normal;font-weight:normal;font-size:13px;font-family:Times New Roman;color:#000000;}
.ft4{font-style:normal;font-weight:normal;font-size:13px;font-family:Arial;color:#008000;}
.ft5{font-style:normal;font-weight:normal;font-size:13px;font-family:Arial;color:#000000;}
.ft6{font-style:normal;font-weight:bold;font-size:16px;font-family:Arial;color:#010100;}
-->
</style>
</head>
<body vlink="#FFFFFF" link="#FFFFFF" bgcolor="#ffffff">

<script TYPE="text/javascript">
var currentpos,timer; 
function initialize() 
{ 
timer=setInterval("scrollwindow()",10);
} 
function sc(){
clearInterval(timer); 
}
function scrollwindow() 
{ 
currentpos=document.body.scrollTop; 
window.scroll(0,++currentpos); 
if (currentpos != document.body.scrollTop) 
sc();
} 
document.onmousedown=sc
document.ondblclick=initialize
</script>
<div style="position:absolute;top:0;left:0"><img width="826" height="1169" src="pg_0331.jpg" ALT=""></div>
<div style="position:absolute;top:1102;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:1102;left:391"><span class="ft0"> - 331 -</span></div>
<div style="position:absolute;top:81;left:90"><span class="ft1">resulting tree is shown in Figure 9.16a.</span></div>
<div style="position:absolute;top:78;left:329"><span class="ft0"> </span></div>
<div style="position:absolute;top:81;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:100;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:241;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:371;left:319"><span class="ft0">  </span></div>
<div style="position:absolute;top:241;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:371;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:390;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:405;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:406;left:136"><span class="ft2"> Figure 9.16:  Outside grandchild on the way down</span></div>
<div style="position:absolute;top:403;left:446"><span class="ft0"> </span></div>
<div style="position:absolute;top:405;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:428;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:426;left:136"><span class="ft3">  </span></div>
<div style="position:absolute;top:426;left:640"><span class="ft3">  </span></div>
<div style="position:absolute;top:428;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:447;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:509;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:463;left:90"><span class="ft1"> The procedure used to fix this is similar to the post-insertion operation with an outside </span></div>
<div style="position:absolute;top:479;left:90"><span class="ft1">grandchild, described earlier. We must perform two color switches and one rotation. So </span></div>
<div style="position:absolute;top:495;left:90"><span class="ft1">we can discuss this in the same terms we did when inserting a node, we'll call the node </span></div>
<div style="position:absolute;top:511;left:90"><span class="ft1">at the top of the triangle that was flipped (which is 12 in this case) X. This looks a little </span></div>
<div style="position:absolute;top:527;left:90"><span class="ft1">odd, because we're used to thinking of X as  the node being inserted, and here it's not </span></div>
<div style="position:absolute;top:543;left:90"><span class="ft1">even a leaf node. However, these on-the-way-down rotations can take place anywhere </span></div>
<div style="position:absolute;top:559;left:90"><span class="ft1">within the tree.</span></div>
<div style="position:absolute;top:556;left:181"><span class="ft0"> </span></div>
<div style="position:absolute;top:509;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:559;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:578;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:608;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:594;left:90"><span class="ft1"> The parent of X is P (25 in this case), and the grandparent of X¡ªthe parent of P¡ªis G </span></div>
<div style="position:absolute;top:610;left:90"><span class="ft1">(50 in this case). We follow the same set of rules we did under Possibility 2, discussed </span></div>
<div style="position:absolute;top:626;left:90"><span class="ft1">above.</span></div>
<div style="position:absolute;top:623;left:132"><span class="ft0"> </span></div>
<div style="position:absolute;top:608;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:626;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:645;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:667;left:79"><span class="ft0">  </span></div>
<div style="position:absolute;top:661;left:90"><span class="ft1"> 1.</span></div>
<div style="position:absolute;top:658;left:102"><span class="ft0">  </span></div>
<div style="position:absolute;top:661;left:113"><span class="ft1">Switch the color of X's grandparent G (50 in this example). Ignore the message that </span></div>
<div style="position:absolute;top:677;left:113"><span class="ft1">the root must be black.</span></div>
<div style="position:absolute;top:674;left:254"><span class="ft0"> </span></div>
<div style="position:absolute;top:667;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:677;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:696;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:712;left:79"><span class="ft0">  </span></div>
<div style="position:absolute;top:712;left:90"><span class="ft1"> 2.</span></div>
<div style="position:absolute;top:709;left:102"><span class="ft0">  </span></div>
<div style="position:absolute;top:712;left:113"><span class="ft1">Switch the color of X's parent P (25).</span></div>
<div style="position:absolute;top:709;left:338"><span class="ft0"> </span></div>
<div style="position:absolute;top:712;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:716;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:735;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:757;left:79"><span class="ft0">  </span></div>
<div style="position:absolute;top:751;left:90"><span class="ft1"> 3.</span></div>
<div style="position:absolute;top:748;left:102"><span class="ft0">  </span></div>
<div style="position:absolute;top:751;left:113"><span class="ft1">Rotate with X's grandparent (50) at the top, in the direction that raises X (here a right </span></div>
<div style="position:absolute;top:767;left:113"><span class="ft1">rotation).</span></div>
<div style="position:absolute;top:764;left:168"><span class="ft0"> </span></div>
<div style="position:absolute;top:757;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:767;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:786;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:808;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:802;left:90"><span class="ft1"> Suddenly, the tree is balanced! It has also become pleasantly symmetrical. It appears to </span></div>
<div style="position:absolute;top:818;left:90"><span class="ft1">be a bit of a miracle, but it's only a result of following the color rules.</span></div>
<div style="position:absolute;top:815;left:506"><span class="ft0"> </span></div>
<div style="position:absolute;top:808;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:818;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:837;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:867;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:853;left:90"><span class="ft1"> Now the node with value 3 can be inserted in the usual way. Because the node it </span></div>
<div style="position:absolute;top:869;left:90"><span class="ft1">connects to, 6, is black, there's no complexity about the insertion. One color flip (at 50) is </span></div>
<div style="position:absolute;top:885;left:90"><span class="ft1">necessary.</span></div>
<div style="position:absolute;top:885;left:157"><span class="ft4"> </span></div>
<div style="position:absolute;top:885;left:161"><span class="ft1">Figure 9.16b</span></div>
<div style="position:absolute;top:885;left:239"><span class="ft5"> shows the tree after 3 is inserted.</span></div>
<div style="position:absolute;top:882;left:448"><span class="ft0"> </span></div>
<div style="position:absolute;top:867;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:885;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:904;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:920;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:920;left:90"><span class="ft6"> Inside Grandchild</span></div>
<div style="position:absolute;top:920;left:231"><span class="ft0"> </span></div>
<div style="position:absolute;top:920;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:923;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:942;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:972;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:958;left:90"><span class="ft1"> If X is an inside grandchild when a red-red conflict occurs on the way down, two rotations </span></div>
<div style="position:absolute;top:974;left:90"><span class="ft1">are required to set it right. This situation is similar to the inside grandchild in the post-</span></div>
<div style="position:absolute;top:990;left:90"><span class="ft1">insertion phase, which we called Possibility 3.</span></div>
<div style="position:absolute;top:987;left:370"><span class="ft0"> </span></div>
<div style="position:absolute;top:972;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:990;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:1009;left:80"><span class="ft0"> </span></div>
<div style="position:absolute;top:1031;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:1025;left:90"><span class="ft1"> Click Start in the RBTree Workshop applet to begin with 50, and insert 25, 75, 12, 37, 31, </span></div>
<div style="position:absolute;top:1041;left:90"><span class="ft1">and 43. You'll need color flips before 12 and 31.</span></div>
<div style="position:absolute;top:1038;left:384"><span class="ft0"> </span></div>
<div style="position:absolute;top:1031;left:640"><span class="ft0">  </span></div>
<div style="position:absolute;top:1042;left:79"><span class="ft0"> </span></div>
<div style="position:absolute;top:1061;left:80"><span class="ft0"> </span></div>
<script TYPE="text/javascript">
			var currentZoom = parent.ltop.currentZoom;
			if(currentZoom != undefined)
				document.body.style.zoom=currentZoom/100;
			</script>
</body>
</html>